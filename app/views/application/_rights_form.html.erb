<%= form_tag url_for(action: params[:action]), method: "patch", class: "rights-form", role: "form" do %>
  <fieldset>
	<legend>Permissions</legend>
	<% all_permissions.each do |permission| %>
	<div class="access-level form-group">
      <label for="permissions_<%= permission %>" class="control-label"><%= permission %></label>
	  <select name="permissions[<%= permission %>][]" id="permissions_<%= permission %>" multiple="multiple" data-placeholder="Select users/groups to grant <%= permission.upcase %>" class="form-control">
		<optgroup label="GROUPS">
		  <%= group_options_for_select permission %>
		</optgroup>
		<optgroup label="USERS">
		  <%= user_options_for_select permission %>
		</optgroup>
	  </select>
	  <p class="help-block"><%= t("dul_hydra.permissions.descriptions.#{permission}") %></p>
	</div>
	<% end %>
  </fieldset>
  <fieldset>
	<legend>License</legend>
	<% license ||= {} %>
	<div class="form-group">
	  <%= label_tag "license_title", "License Title", class: "control-label" %>
	  <%= text_field_tag "license[title]", license[:title], class: "form-control" %>
	</div>
	<div class="form-group">
	  <%= label_tag "license_description", "License Description", class: "control-label" %>
	  <textarea name="license[description]" id="license_description" class="form-control"><%= license[:description] %></textarea>
	</div>
	<div class="form-group">
	  <%= label_tag "license_url", "License URL", class: "control-label" %>
	  <%= text_field_tag "license[url]", license[:url], class: "form-control" %>
	</div>
  </fieldset>
  <div class="form-group">
	<%= submit_tag "Save", data: {confirm: "TODO: PUT I18N HERE"}, class: "btn btn-primary" %>
	<%= cancel_button %>
  </div>
<% end %>

<script type="text/javascript">
  $(function() {
    $(".rights-form select").chosen({
      placeholder_text_multiple: $(this).attr("data-placeholder")
    });
  });
</script>

